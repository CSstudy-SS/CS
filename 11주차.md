### 공부 주제

- SQL Injection
- SQL & NoSQL
- 정규화


## 질문

### SQL Injection


@준엽님


### SQL vs NoSQL

- **RDB와 NoSQL의 차이에 대해 설명해주세요**
    <details>

    - 관계형 데이터베이스(RDB)와 NoSQL 데이터베이스는 각각 데이터를 저장하고 관리하는 방식에서 차이
    - RDB
        - 테이블을 기반으로 데이터를 저장
        - 각 테이블은 정의된 스키마를 가짐
        - 테이블 간에는 관계가 설정되어 있고 이러한 관계를 통해 데이터를 연결하고 관리
        - RDB는 ACID(원자성, 일관성, 고립성, 지속성) 특성을 갖추고 있어 데이터의 무결성과 일관성을 보장
        - RDB의 대표적인 예로는 MySQL, Oracle 등이 있습니다.
    - NoSQL
        - Not Only SQL
        - RDB에서 사용되는 테이블 기반의 데이터 모델을 사용하지 않고, 스키마가 존재하지 않거나, 유연한 스키마를 사용
        - NoSQL은 분산형 아키텍처를 사용하여, 대용량의 데이터를 처리하고 확장성을 갖출 수 있습니다.
        - NoSQL은 RDB와 달리 ACID보다는 BASE(Basically Available, Soft-state, Eventually Consistent) 특성
            - 이는 일관성을 보장하지 않는 대신 가용성과 분산 확장성을 높이는 것을 목표로 합니다. NoSQL의 대표적인 예로는 MongoDB, Cassandra 등이 있습니다.
    - RDB는 정형화된 데이터를 다루는 데에 효과적
        - ACID 특성으로 데이터의 일관성과 무결성을 보장
    - NoSQL은 비정형화된 데이터나 대규모 데이터 처리에 적합
        - BASE 특성으로 가용성과 확장성을 높이는 것을 목표
    </details>
    
- **NoSQL을 활용한 경험이 있나요? 있다면, 왜 RDB를 선택하지 않고 해당 DB를 선택했는지 설명해주세요 ( 질문 의도 = NoSQL은 언제 사용하면 좋을까요?)**
    <details>
    (정답이 없기 때문에 근거로 설득시키기)
    
    - NoSQL은 정확한 데이터 구조가 정해지지 않은 경우, 데이터 update가 자주 이루어지지 않고, 조회가 많은 경우, 또 scale-out이 가능하므로 데이터 양이 매우 많은 경우에 사용하면 좋다.
    - 정확한 데이터 구조를 알 수 없거나 변경/확장 될 수 있는 경우
    - 읽기를 자주하지만, 데이터 변경은 자주 없는 경우
    - 조회가 많은 경우
    - 데이터베이스를 수평적으로 확장해야 하는 경우
        - scale-out이 가능
        - 데이터 양이 매우 많은 경우

    </details>

- **RDB는 언제 사용하면 좋을까요?**

    <details>
    - RDB는 데이터 구조가 명확하여 변경될 여지가 없는 경우

    - 데이터 중복이 없으므로 데이터 update가 잦은 시스템

    </details>


- **RDB의 어떠한 특징 때문에 NoSQL에 비해 부하가 많이 걸릴 수 있을까요?**

    <details>
    RDB는 관계형 데이터 모델을 사용하는 데이터베이스로, **데이터를 엄격하게 구조화하여 저장**합니다. 이러한 특성 때문에 데이터의 일관성을 보장하기 위해 여러 테이블 간에 조인 연산을 수행해야 할 수 있습니다. 따라서 데이터베이스에 많은 부하가 걸릴 수 있습니다.
    
    - RDB
        - 트랜잭션(Transaction)을 지원하여 ACID(원자성, 일관성, 격리성, 지속성)를 보장
        - 하지만 ACID를 보장하려면 데이터의 무결성을 유지하기 위해 락(Lock)을 걸어야 할 수 있다.
        - 이렇게 되면 동시에 많은 수의 데이터 요청이 있을 경우 락 경합(Lock Contention)이 발생하여 성능 저하를 야기할 수 있다.
    - NoSQL
        - 스키마 없는 데이터 모델을 사용하여 데이터의 유연성을 높였으며, 수평적인 확장성을 지원하여 더 많은 데이터를 저장하고 처리할 수 있다.
        - NoSQL은 일관성 모델(Consistency Model)을 이용하여 데이터의 일관성을 보장하는데, 일관성 모델에 따라서 읽기 연산의 일관성 수준을 조절할 수 있어서 락 경합을 줄일 수 있습다
    - **RDB에서는 다수의 조인 연산과 락 경합 때문에 부하가 많이 걸릴 수 있습니다**.
    - **NoSQL은 스키마 없는 유연한 데이터 모델과 수평적인 확장성, 일관성 모델 등을 이용하여 더욱 많은 데이터를 빠르고 효율적으로 처리할 수 있어서 RDB에 비해 부하가 적을 수 있습니다.**
    </details>

- **락 경합이란 무엇인가요?** (꼬리질문용)

    <details>

    - 두 개 이상의 프로세스나 스레드가 공유 자원에 접근하여 그 값을 변경하려는 경우, 동시에 접근하여 예상치 못한 결과를 발생시키는 문제
        - 데이터베이스 시스템에서 발생할 수 있다.

    - 두 개의 트랜잭션이 동시에 같은 데이터를 수정하려고 시도하면 락 경합이 발생할 수 있다.
        - 이 경우 두 트랜잭션 중 어느 것이 먼저 실행될지 알 수 없으며, 각 트랜잭션의 실행 순서에 따라 결과가 달라질 수 있습니다.

        - 락 경합은 데이터 일관성을 보장하는 ACID 원칙을 위반하며, 데이터의 정합성을 해치는 원인

    </details>    

- **락 경합을 방지하는 방법**

    <details>
    - 락(Lock)을 사용하는 것
        - 데이터베이스 시스템에서는 여러 종류의 락을 제공

        - 트랜잭션에서 공유 자원을 사용할 때 락을 획득하고 작업이 완료되면 락을 해제하는 방식으로 동작

        - 락을 획득하고 해제하는 과정에서 발생하는 오버헤드는 성능에 영향을 미치기 때문에 최적의 락 방법을 선택하는 것이 중요

    - 락 경합을 피하기 위해 트랜잭션을 짧게 유지

    - 락을 사용하지 않고 동시성 제어 기법
    </details>


- **SQL과 NoSQL 중에서 어떤 데이터베이스를 선택해야 할까요? 선택 기준은 무엇인가요?** 

    <details>
    - SQL과 NoSQL 중 어떤 데이터베이스를 선택해야 할지는 사용자의 요구사항과 환경에 따라 다르다!

    - SQL은 정형화된 데이터를 다루는 데 적합하며, NoSQL은 비정형 데이터를 다루는 데 적합
        - 트랜잭션 처리가 필요한 은행 업무와 같은 경우 SQL 데이터베이스를 사용하는 것이 좋습니다

        - 대용량의 비정형 데이터를 다루는 경우에는 NoSQL 데이터베이스를 사용하는 것이 유리

    - 데이터베이스의 확장성과 가용성
        - SQL 데이터베이스는 주로 수직적 확장(Vertical Scaling)에 의존
            - 더 많은 리소스(메모리, CPU)를 추가하여 단일 서버에서 처리하는 방식
        - NoSQL 데이터베이스는 수평적 확장(Horizontal Scaling)에 의존
            - 여러 대의 서버에 데이터를 분산하여 처리하는 방식
        - 이러한 확장성 차이 때문에, 대규모의 데이터 처리를 해야 하는 경우 NoSQL 데이터베이스를 선택하는 것이 좋다.

    - 데이터베이스의 성능과 가용성, 보안, 유지보수 비용
    </details>

### 정규화


- 정규화가 무조건 좋은가요? 그렇지 않다면, 어떤 상황에서 역정규화를 하는 것이 좋은 지 설명해주세요

    <details>
    - 정규화는 일반적으로 데이터 일관성과 중복 데이터를 줄이기 위해 사용되는 좋은 방법론 그러나 역정규화도 종종 사용

    - **역정규화는 성능 문제를 해결하기 위한 대안으로 사용**

    - **비즈니스 규칙이나 사용자 요구 사항에 따라 중복 데이터를 사용하는 것이 필요**할 수 있다.
        - 역정규화를 적용할 때는 데이터 일관성 문제와 중복 데이터 관리 등의 문제를 염두에 두어야 한다.

    - 역정규화가 필요한 경우 항상 그리고 전체 테이블이 아닌 일부 테이블에서만 중복 데이터를 허용
    </details>


### 정리 링크

* 세정 : [11주차 공부 내용](https://evening-november-9ec.notion.site/11-57263d42bb8f4e53a497284c55d85541)
